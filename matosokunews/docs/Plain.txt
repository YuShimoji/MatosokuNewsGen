
### 4. データベースのセットアップ
```bash
# Prismaマイグレーション実行
npx prisma migrate dev --name init

# Prisma Clientの生成
npx prisma generate
```

## 開発サーバーの起動

### 基本的な起動手順
```bash
# プロジェクトディレクトリに移動
cd matosokunews

# 開発サーバー起動
npm run dev
```

### トラブルシューティング

#### 1. Hydrationエラーが発生する場合
```bash
# 開発サーバーを停止
Ctrl+C

# Next.jsキャッシュをクリア
Remove-Item -Recurse -Force .next

# 開発サーバーを再起動
npm run dev
```

#### 2. 依存関係の問題が発生する場合
```bash
# node_modulesを削除
Remove-Item -Recurse -Force node_modules

# package-lock.jsonを削除
Remove-Item package-lock.json

# 依存関係を再インストール
npm install

# 開発サーバーを起動
npm run dev
```

#### 3. ポートが使用中の場合
- 開発サーバーは自動的に別のポート（3001、3002など）を使用します
- ブラウザで表示されたURLにアクセスしてください

#### 4. データベース接続エラーの場合
```bash
# データベース接続を確認
npx prisma db push

# Prisma Studioでデータベースを確認
npx prisma studio
```

## テスト手順

### 1. 基本動作確認
1. 開発サーバーが正常に起動することを確認
2. ブラウザでlocalhost:3000（または表示されたポート）にアクセス
3. ページが正常に表示されることを確認
4. コンソールエラーがないことを確認

### 2. データベース接続確認
```bash
# Prisma Studioを起動
npx prisma studio
```

### 3. ビルド確認
```bash
# プロダクションビルド
npm run build

# ビルド成功を確認
npm start
```

## よくある問題と解決方法

### 問題1: `Could not read package.json`エラー
**原因**: 間違ったディレクトリでコマンドを実行している
**解決方法**: `cd matosokunews`でプロジェクトディレクトリに移動

### 問題2: `Port 3000 is already in use`
**原因**: ポート3000が他のプロセスで使用中
**解決方法**: 自動的に別のポートが使用されるため、表示されたURLにアクセス

### 問題3: Hydration failed エラー
**原因**: サーバーサイドとクライアントサイドのレンダリング結果が不一致
**解決方法**: 
1. `.next`フォルダを削除
2. 開発サーバーを再起動
3. ブラウザのキャッシュをクリア

### 問題4: データベース接続エラー
**原因**: DATABASE_URLが正しく設定されていない
**解決方法**: 
1. `.env`ファイルのDATABASE_URLを確認
2. Supabaseの直接接続URL（ポート5432）を使用
3. `pgbouncer=true`パラメータを削除

## 開発フロー

1. **機能開発前**
   - 最新のコードをpull
   - 依存関係を更新: `npm install`
   - 開発サーバーを起動: `npm run dev`

2. **開発中**
   - ファイル保存時の自動リロードを確認
   - ブラウザでリアルタイム確認
   - コンソールエラーをチェック

3. **開発完了後**
   - ビルドテスト: `npm run build`
   - 変更をコミット・プッシュ
   - ドキュメント更新

## 緊急時の完全リセット手順

すべてが動作しない場合の最終手段：

```bash
# 1. 開発サーバーを停止
Ctrl+C

# 2. すべてのキャッシュ・依存関係を削除
Remove-Item -Recurse -Force .next
Remove-Item -Recurse -Force node_modules
Remove-Item package-lock.json

# 3. 依存関係を再インストール
npm install

# 4. データベースをリセット
npx prisma migrate reset

# 5. 開発サーバーを起動
npm run dev
```

## 連絡先・サポート

問題が解決しない場合は、以下の情報を含めて報告してください：
- 実行したコマンド
- エラーメッセージの全文
- 使用しているOS
- Node.jsのバージョン: `node --version`
- npmのバージョン: `npm --version`